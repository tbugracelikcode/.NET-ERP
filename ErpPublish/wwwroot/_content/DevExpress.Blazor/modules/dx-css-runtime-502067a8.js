class e{constructor(e,t,o){this.defaultValueSource=e,this.computedValueSource=t,this.valueDestination=o}}const t=[new e("--bs-body-bg","background-color","--dxbl-body-bg"),new e("--bs-body-color","color","--dxbl-body-color")],o=["--primary","--bs-primary"],n=50,r=200;function a(){const e=document.body,o=window.getComputedStyle(e);t.forEach((t=>{e.style.removeProperty(t.valueDestination)})),t.filter((e=>!o.getPropertyValue(e.defaultValueSource))).forEach((t=>{e.style.setProperty(t.valueDestination,o.getPropertyValue(t.computedValueSource))}))}function s(e,t){if(0===t)return e();const n=window.getComputedStyle(document.body);if(o.map((e=>!!n.getPropertyValue(e))).reduce(((e,t)=>e||t),!1))return e();setTimeout((()=>s(e,t-1)),r)}const i=new Promise(((e,t)=>{const o=document.createElement("IFRAME");o.style.cssText="position: absolute; display: none; top: -10000px; left: -10000px;",o.onload=()=>{e(o)},document.body.appendChild(o)}));function d(e){return new Promise(((t,o)=>{var r;(r=e,new Promise(((e,t)=>{i.then((t=>{const o=t.contentDocument,n=o.createElement("link");n.href=r,n.rel="stylesheet",n.onload=()=>{e(),n.remove()},n.onerror=()=>{e(),n.remove()},o.head.appendChild(n)}))}))).then((()=>{s(t,n)}))}))}async function u(e){if(e.nodeType===Node.ELEMENT_NODE){if("LINK"===e.tagName){const t=e;if("stylesheet"===t.rel)return await d(t.href),!0}}return!1}function c(e){u(e).then((e=>{e&&a()}))}const l={initializeThemeCssRuntimeVariables:function(){const e=document.head;new MutationObserver(((e,t)=>{for(const t of e)"childList"===t.type&&t.addedNodes?t.addedNodes.forEach(c):"attributes"===t.type&&"href"===t.attributeName&&c(t.target)})).observe(e,{attributes:!0,childList:!0,subtree:!0}),Promise.all(Array.from(document.head.childNodes).map((e=>u(e)))).then((()=>a()))}};export{l as default};
