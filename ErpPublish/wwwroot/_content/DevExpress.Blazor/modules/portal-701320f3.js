import{_ as e}from"./_tslib-6e8ca86b.js";import{D as t}from"./data-qa-utils-8be7c726.js";import{d as s}from"./constants-058ebb50.js";import{s as n}from"./lit-element-70cf14f4.js";import{e as o}from"./property-d3853089.js";import{e as r}from"./custom-element-267f9a21.js";const a=new class{_doWithElementCheck(e){const t=document.querySelector(s);return e(null!=t?t:this._createPopupElement())}_createPopupElement(){const e=document.createElement(s);return document.body.appendChild(e),e}constructor(){this._rootElementPromise=customElements.whenDefined(s)}assign(e){this._rootElementPromise.then((()=>this._doWithElementCheck((t=>t.assign(e)))))}getPopup(e){return this._rootElementPromise.then((()=>this._doWithElementCheck((t=>t.getPopup(e)))))}release(e){this._rootElementPromise.then((()=>this._doWithElementCheck((t=>t.release(e)))))}};function l(){return a}const i="dxbl-portal";class c{constructor(e){this.elements=e}}class d extends CustomEvent{constructor(e){super(d.eventName,{detail:e,bubbles:!0})}}d.eventName="dxbl-portable-elements-changed";let h=class extends n{constructor(){super(...arguments),this._portable=null,this._elementsPorted=!1,this.slotChangedHandler=this.handleSlotChange.bind(this)}get portable(){return this._portable}createRenderRoot(){const e=super.createRenderRoot(),t=document.createElement("slot");return e.appendChild(t),t.addEventListener("slotchange",this.slotChangedHandler),e}handleSlotChange(e){const t=e.target.assignedNodes();this._elementsPorted&&0===t.length||(this.assignElements(t),this._elementsPorted=!0)}assignElements(e){this._portable=e,this.raiseElementsChanged(e)}connectedCallback(){super.connectedCallback(),t.setLoaded(this),l().assign(this)}disconnectedCallback(){super.disconnectedCallback(),l().release(this),t.removeLoaded(this)}raiseElementsChanged(e){const t=new d(new c(e));this.dispatchEvent(t)}updated(e){if(!this.branchId)throw new Error("branch-id must be specified")}};function m(){}e([o({type:String,attribute:"branch-id"})],h.prototype,"branchId",void 0),h=e([r(i)],h);const p=Object.freeze({__proto__:null,dxPortalTagName:i,PortableElementsChangedEvent:d,get DxPortal(){return h},init:m,default:{init:m,DxPortal:h,dxPortalTagName:i}});export{h as D,d as P,l as g,p};
