import{_ as t}from"./_tslib-6e8ca86b.js";import{d as e}from"./dom-e3fa5208.js";import{S as i}from"./single-slot-element-base-4efb3864.js";import{C as o}from"./css-classes-f3f8ed66.js";import{T as s}from"./text-editor-ed669352.js";import{e as n}from"./property-d3853089.js";import{g as a,r,a as l}from"./dom-utils-eacbb99f.js";import{e as p}from"./custom-element-267f9a21.js";import"./browser-f8f6e902.js";import"./common-eb095e4d.js";import"./data-qa-utils-8be7c726.js";import"./dx-ui-element-db9e89a3.js";import"./lit-element-base-7a85dca5.js";import"./lit-element-70cf14f4.js";import"./logicaltreehelper-99f1adf9.js";import"./layouthelper-1d804c8c.js";import"./point-e4ec110e.js";import"./constants-58283e53.js";import"./custom-events-helper-e7f279d3.js";import"./constants-d4ec8d6f.js";import"./eventhelper-8570b930.js";function c(t){return{fromAttribute:e=>t[e],toAttribute:e=>t[e]}}class d{}d.Root=o.Prefix+"-fl",d.Loading=d.Root+"-loading",d.RowBreak=d.Root+"-row-break",d.Group=d.Root+"-group",d.GroupBody=d.Group+"-body",d.GroupDecoration=d.Root+"-gd",d.GroupTab=d.Root+"-gt",d.GroupHeaderTemplate=d.Root+"-group-header-tmpl",d.Item=d.Root+"-item",d.TabItem=d.Root+"-tab-item",d.Caption=d.Root+"-cpt",d.EmptyCaption=d.Root+"-empty-caption",d.BeginRow=d.Root+"-begin-row",d.TabContent=d.Root+"-tab-content",d.ItemContentWithCaption=d.Root+"-ctrl",d.ItemContentWithoutCaption=d.Root+"-ctrl-nc",d.ItemHorizontal=d.Root+"-item-horizontal",d.HeaderContentTemplate=d.Root+"-header-content-tmpl",d.CaptionTemplate=d.Root+"-caption-tmpl",d.ItemCaptionWidthCalculation=d.Root+"-calc",d.Row=o.Prefix+"-row";const u="dxbl-form-layout-item";class m extends i{constructor(){super(),this.captionFor=null}get useShadowDom(){return!1}contentChanged(){super.contentChanged(),this.initCaptionForInput()}initCaptionForInput(){var t;const e=this.getCaption();if(e&&""!==this.captionFor){const i=this.captionFor||(null===(t=this.getEditorInput())||void 0===t?void 0:t.id);i&&(e.htmlFor=i)}}getCaption(){return this.querySelector(`:scope > .${d.Caption}`)}getEditorInput(){return this.querySelector(`.${s.TextEdit} > input, .${s.TextEdit} > textarea, .dxbl-checkbox-check-element > input`)}}var h;t([n({attribute:"caption-for"})],m.prototype,"captionFor",void 0),function(t){t.v4="v4",t.v5="v5"}(h||(h={}));const C={};function g(t){!function(t,i,o){const s=C[t]||(C[t]=e.DomUtils.getCurrentStyle(document.body).getPropertyValue(t)||i);if(s){const t=a();t&&t.insertRule("@media (min-width: "+s+") {\n"+o+"\n}\n",t.cssRules.length)}}("--breakpoint-lg","992px",t)}var y,f;!function(t){t[t.None=0]="None",t[t.InGroups=1]="InGroups",t[t.All=2]="All"}(y||(y={})),function(t){t[t.Small=0]="Small",t[t.Medium=1]="Medium",t[t.Large=2]="Large"}(f||(f={}));const b=` > .${d.Caption}`,R=`${u}.${d.Item}.${d.ItemHorizontal}`,v=/\./g;class A extends i{constructor(){super(...arguments),this.captionAlignment=y.InGroups}get itemSelector(){return` > .${d.Row} > ${R}`}get mainElementId(){return this.id}getMainElement(){return document.getElementById(this.mainElementId)}calculateAdaptivityCssRules(){}startCalculationItems(t){const e=this.querySelectorAll(`:scope${` .${t}`}`);for(let t=0;t<e.length;t++)e[t].calculateAdaptivityCssRules()}updateGroups(){this.startCalculationItems(d.Group)}updateTabs(){this.startCalculationItems(d.TabContent)}createAdaptivityCssRules(){var t;let i=0;e.DomUtils.addClassName(this,d.ItemCaptionWidthCalculation);const o=` .${d.GroupBody}[expanded-state=False]`,s=null===(t=this.getMainElement())||void 0===t?void 0:t.querySelectorAll(`:scope${o}`),n=t=>{for(let e=0;e<s.length;e++)s[e].style.display=t?"":"none",s[e].style.visibility=t?"hidden":""};n(!0);const a=this.findCaptions();a&&a.length>0&&(i=this.getMaxCaptionWidth(a),this.createAdaptivityCssRulesForElements(i)),n(!1),e.DomUtils.removeClassName(this,d.ItemCaptionWidthCalculation)}findCaptions(){return[...this.querySelectorAll(`:scope${this.itemSelector}${b}`)]}createAdaptivityCssRulesForElements(t){this.createCssRulesForElementsInternal(t,!1,!1)}getMaxCaptionWidth(t){let e=0;if(t.length>0){const i=t.find((t=>t.classList.contains(d.EmptyCaption)));let o="0 px";i&&(o=window.getComputedStyle(i,null).getPropertyValue("height"));for(let i=0;i<t.length;i++){const s=t[i].offsetWidth;this.isEmptyCaption(t[i])&&(t[i].style.height=o);const n=t[i].parentNode;n&&s>e&&s<n.offsetWidth&&(e=s)}}return e>0?e+1:0}isEmptyCaption(t){return t.classList.contains(d.EmptyCaption)}getFilteredElements(t){return r(t,(t=>l(t,d.Root)===this))}encodeDotsForMediaQuiery(t){return t.replace(v,"\\$&")}getAdaptivityCssRulesPrefix(){const t=this.getMainElement();if(!t)return null;let e=`.${d.Root}`,i=t;for(;i;)e=" #"+this.encodeDotsForMediaQuiery(i.id)+e,i=l(i.parentNode,d.Root);e.slice(1);let o="",s=this;for(;s&&s!==t&&t.contains(s);)s.id&&(o=" #"+this.encodeDotsForMediaQuiery(s.id)+o),s=l(s.parentNode,d.Group);return e+=o,e}createCssRulesForElementsInternal(t,e,i){if(0!==t&&(!this.itemCaptionWidth||t!==this.itemCaptionWidth)){this.itemCaptionWidth=t;const e=this.getAdaptivityCssRulesPrefix(),i=this.captionAlignment===y.InGroups?this.itemSelector:` ${R}`;let o=e+i+`${b} {\n width:`+t+"px;\n}\n";o+=e+i+` > .${d.ItemContentWithCaption}:not(img):not(.${d.EmptyCaption} + .${d.ItemContentWithCaption}):not(.${d.ItemContentWithoutCaption}) {\n width: calc(100% - `+t+"px);\n}\n",g(o)}}}t([n({attribute:"caption-alignment",type:y,converter:c(y)})],A.prototype,"captionAlignment",void 0);class I extends A{constructor(){super(),this.sizeMode=f.Medium,this.isRendered=!1,this.mutationObserver=new MutationObserver((t=>{this.itemVisibilityChangeHandler(t)}))}connectedCallback(){super.connectedCallback(),this.mutationObserver.observe(this,{childList:!0,subtree:!0})}disconnectedCallback(){super.disconnectedCallback(),this.isRendered=!1,this.mutationObserver.disconnect()}itemVisibilityChangeHandler(t){t.find((t=>(0!==t.addedNodes.length||0!==t.removedNodes.length)&&"dxbl-row"===t.target.className))&&this.isRendered&&this.calculateAdaptivityCssRules()}willUpdate(t){(t.has("sizeMode")||t.has("captionAlignment"))&&setTimeout((()=>this.calculateAdaptivityCssRules()))}findCaptions(){return this.captionAlignment===y.All?this.getFilteredElements(this.querySelectorAll(`${R}:not(.${o.Invisible})`+b)):super.findCaptions()}calculateAdaptivityCssRules(){this.captionAlignment!==y.None&&this.createAdaptivityCssRules(),this.captionAlignment===y.InGroups&&(this.updateGroups(),this.updateTabs()),e.DomUtils.removeClassName(this,d.Loading),this.isRendered=!0}}t([n({attribute:"size-mode",type:f,converter:c(f)})],I.prototype,"sizeMode",void 0);class $ extends A{constructor(t){super(),this._isMainTabElement=t,this.flId=""}get mainElementId(){return this.flId}calculateAdaptivityCssRules(){this.captionAlignment!==y.None&&this.createAdaptivityCssRules()}}t([n({attribute:"fl-id",type:String})],$.prototype,"flId",void 0);class x{}x.Group=o.Prefix+"-group",x.Header=x.Group+"-header",x.Body=x.Group+"-body",x.BodyContent=x.Body+"-content";let E=class extends ${constructor(){super(!0),this.isActiveTab=!1}get itemSelector(){return` > .${d.Row} > .${d.TabItem}.${d.ItemHorizontal}`}willUpdate(t){t.has("isActiveTab")&&this.isActiveTab&&(this.captionAlignment===y.InGroups&&(this.calculateAdaptivityCssRules(),this.updateTabs(),this.updateGroups()),this.captionAlignment===y.All&&this.getMainElement().calculateAdaptivityCssRules())}createAdaptivityCssRulesForElements(t){this.createCssRulesForElementsInternal(t,!0,!1)}};t([n({attribute:"is-active-tab",type:Boolean})],E.prototype,"isActiveTab",void 0),E=t([p("dxbl-form-layout-tab")],E);let G=class extends ${constructor(){super(!1)}get itemSelector(){const t=` > .${d.Row} > ${R}`,e=` > .${x.Group} > .${x.Body} > .${x.BodyContent}${t}`;return this.isMainElementCardGroup()?e:t}isMainElementCardGroup(){return this.classList.contains(d.GroupDecoration)}createAdaptivityCssRulesForElements(t){this.createCssRulesForElementsInternal(t,!1,this.isMainElementCardGroup())}};G=t([p("dxbl-form-layout-group")],G);let j=class extends m{};j=t([p(u)],j);let F=class extends I{};F=t([p("dxbl-form-layout")],F);export{F as DxFormLayout,j as DxFormLayoutItem,G as dxFormLayoutGroup,E as dxFormLayoutTab};
